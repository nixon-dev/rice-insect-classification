{% extends "base.html" %} {% block title %} Rice Something {% endblock %} {%
block content %} {% include "sidenav.html" %}

<main id="main" class="main">
  <div class="pagetitle">
    <h1>Requested Insect</h1>
  </div>

  <div class="row">
    <div class="col-lg-12">
      <div class="card">
        <div class="card-body">
          <span class="invisible">NANASHI WAS HERE</span>

          <table id="request" class="table table-striped">
            <thead>
              <tr>
                <th scope="col">#</th>
                <th scope="col">Insect Name</th>
                <th scope="col">Description</th>
                <th scope="col">Requester</th>
                <th scope="col">Image</th>
              </tr>
            </thead>
            <tbody>
              {% for request in requests %}
              <tr>
                <td>{{ request['request_id'] }}</td>
                <td>{{ request['insect_name'] }}</td>
                <td>{{ request['description'] }}</td>
                <td>{{ request['fullname'] }}</td>
                <td>
                  {% if request['insect_image'] %}
                      <img src="data:image/jpeg;base64,{{ request['insect_image'] }}" alt="Insect Image" style="height:100px; width: 100px; object-fit: cover;">
                  {% else %}
                      N/A
                  {% endif %}
              </td>
              
              </tr>
              {% else %}
              <tr class="text-center">
                <td colspan="5">No Records Found</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
  
</main>

<script src="{{ url_for('static', filename='js/jquery-3.7.1.js')}}"></script>
<script src="{{ url_for('static', filename='js/dataTables.js')}}"></script>

<script>
  new DataTable('#request', {
    search: {
      return: true
    },
    responsive: true
  });

</script>

{% endblock %}